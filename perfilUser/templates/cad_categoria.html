{% load static %}
<body>
    {% include 'header.html' %}
    <div class="body-conf">
        <div class="d-flex">
            <nav class="t-align font-sans">
                <div class="d-grid nav-div">
                    <a class="a-nav text-decoration" href="{% url 'home_adm' %}">Usuários</a>
                    <a class="a-nav text-decoration" href="{% url 'cad_categoria' %}">Categorias</a>
                </div>
                <div class="d-grid nav-div nav-div-m container-qnt-us">
                    <h2 class="h2-qnt-us">Quantidade de categorias cadastradas</h2>
                    <h3 class="h3-font-size">{{qnt_categoria}}</h3>
                </div>
            </nav>
            <form class="d-grid form-w" action="{% url 'cadastro_categoria' %}" method="POST"> {% csrf_token %}
                <div class="t-align div-h1">
                    <h1 class="h1-font ">Cadastro de Categorias</h1>
                </div>
                <div class="d-grid">
                    <label class="label" for="">Nome da Categoria</label>
                    <input class="input-adm-cad" type="text" name="nome_categoria">
                    {% if status == '1' %}
                    <p class="status-error">Este campo não pode ser vazio</p>
                    {% endif %}
                </div>
                <div class="btn-margin-top">
                    <button class="input-adm-cad cursor-pointer btn-cad-adm" type="submit">Cadastrar</button>
                    {% if status == '0' %}
                    <p class="status-success">Cadastro realizado com sucesso</p>
                    {% endif %}
                </div>
            </form>
        </div>
        <section class="d-flex flex-dir alg-itens-center width-100 margin-table">
            <div class="t-align">
                <h2 class="font-h2-cat font-sans">Categorias Cadastradas</h2>
                {% for categoria in categorias %}
                    <p name="categoria" id="categoria" class="p-categorias">{{categoria.nome}}</p>
                    <button class="btn-excluir" type="button" onclick="excluirCategoria('{{ categoria.id }}')">Excluir</button>
                    <hr>
                {% endfor %}
            </div>
        </section>
    </div>
    <script>
    function excluirCategoria(categoria_id) {
        const url = "{% url 'excluir_categoria' 123 %}"
        const confirm = window.confirm("Deseja excluir?")
        if (confirm) {
            window.location.assign(url.replace('123', categoria_id))
        }
    }
    </script>
    {% include 'footer.html' %}
</body>